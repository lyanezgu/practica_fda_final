library(readr)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
View(hospital_charges)
knitr::opts_chunk$set(echo = TRUE)
library(readr)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
library(readr)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
h
hospital_charges
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(ggplot2)
head(hospital_charges)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
head(hospital_charges)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
head(hospital_charges)
summary(hospital_charges)
names(hospital_charges) <- c('drg_def', 'prov_id', 'prov_name', 'prov_address', 'prov_city', 'prov_state',
'prov_zip', 'referral_reg', 'total_discharges', 'mean_covered_charges',
'mean_total_payments', 'mean_medicare_payments')
head(hospital_charges)
library(dplyr)
library(tidyr)
library(tidyr)
library(GGally)
library(dplyr)
library(tidyr)
remove_dollar <- function(x) {as.numeric(str_replace(x, '\\$', ''))}
charges <- charges %>%
mutate_at(vars(mean_covered_charges, mean_total_payments, mean_medicare_payments),
remove_dollar)
remove_dollar <- function(x) {as.numeric(str_replace(x, '\\$', ''))}
hospital_charges <- hospital_charges %>%
mutate_at(vars(mean_covered_charges, mean_total_payments, mean_medicare_payments),
remove_dollar)
remove_dollar <- function(x) {as.numeric(str_replace(x, '\\$', ''))}
hospital_charges <- hospital_charges %>%
mutate_at(vars(mean_covered_charges, mean_total_payments, mean_medicare_payments),remove_dollar)
hospital_charges <- hospital_charges %>%     mutate_at(vars(mean_covered_charges, mean_total_payments, mean_medicare_payments),remove_dollar)
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
head(hospital_charges)
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges)
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_medicare_payments = as.numeric(gsub("\\$","",hospital_charges$mean_medicare_payments))
head(hospital_charges)
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_medicare_payments = as.numeric(gsub("\\$","",hospital_charges$mean_medicare_payments))
head(hospital_charges)
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,16000))
hospital_charges$prov_state[ind]<-NA
hospital_charges
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,10))
hospital_charges$prov_state[ind]<-NA
hospital_charges
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,10))
hospital_charges$prov_state[ind]<-NA
hospital_charges
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,0.1))
hospital_charges$prov_state[ind]<-NA
hospital_charges
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,0.1))
hospital_charges$prov_state[ind]<-NA
hospital_charges
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,0.1))
hospital_charges$prov_state[ind]<-NA
hospital_charges
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,10))
hospital_charges$prov_state[ind]<-NA
hospital_charges
ind <- which(hospital_charges$prov_state %in% sample(hospital_charges$prov_state,16000))
hospital_charges$prov_state[ind]<-NA
hospital_charges
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(readr)
library(ggplot2)
library(GGally)
library(dplyr)
library(GGally)
library(dplyr)
library(tidyr)
library(missForest)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
head(hospital_charges)
head(hospital_charges)
summary(hospital_charges)
names(hospital_charges) <- c('drg_def', 'prov_id', 'prov_name', 'prov_address', 'prov_city', 'prov_state',
'prov_zip', 'referral_reg', 'total_discharges', 'mean_covered_charges',
'mean_total_payments', 'mean_medicare_payments')
head(hospital_charges)
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_medicare_payments = as.numeric(gsub("\\$","",hospital_charges$mean_medicare_payments))
hospital_charges$mean_medicare_payments = as.numeric(gsub("\\$","",hospital_charges$mean_medicare_payments))
head(hospital_charges)
bind_cols(hospital_charges[c(1,3,5,7,8,9,11,12)],missForest::prodNA(hospital_charges[c(-1,-3,-5,-7,-8,-9,-11,-12)],noNA=0.1))
hospital_charges
bind_cols(hospital_charges[c(1,3,5,7,8,9,11,12)],missForest::prodNA(hospital_charges[c(-1,-3,-5,-7,-8,-9,-11,-12)],noNA=0.1))
hospital_charges <-bind_cols(hospital_charges[c(1,3,5,7,8,9,11,12)],missForest::prodNA(hospital_charges[c(-1,-3,-5,-7,-8,-9,-11,-12)],noNA=0.1))
set.seed(1)
hospital_charges <-bind_cols(hospital_charges[c(1,3,5,7,8,9,11,12)],missForest::prodNA(hospital_charges[c(-1,-3,-5,-7,-8,-9,-11,-12)],noNA=0.1))
hospital_charges
library(readr)
library(ggplot2)
library(GGally)
library(dplyr)
library(tidyr)
library(missForest)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
head(hospital_charges)
summary(hospital_charges)
names(hospital_charges) <- c('drg_def', 'prov_id', 'prov_name', 'prov_address', 'prov_city', 'prov_state',
'prov_zip', 'referral_reg', 'total_discharges', 'mean_covered_charges',
'mean_total_payments', 'mean_medicare_payments')
head(hospital_charges)
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_medicare_payments = as.numeric(gsub("\\$","",hospital_charges$mean_medicare_payments))
head(hospital_charges)
set.seed(1)
hospital_charges <-bind_cols(hospital_charges[c(1,3,5,7,8,9,11,12)],missForest::prodNA(hospital_charges[c(-1,-3,-5,-7,-8,-9,-11,-12)],noNA=0.1))
hospital_charges
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(ggplot2)
library(GGally)
library(dplyr)
library(tidyr)
library(missForest)
library(knitr)
hospital_charges <- read_csv("notebooks/hospital-charges.csv")
head(hospital_charges)
summary(hospital_charges)
library(readr)
library(ggplot2)
library(GGally)
library(dplyr)
library(tidyr)
library(missForest)
names(hospital_charges) <- c('drg_def', 'prov_id', 'prov_name', 'prov_address', 'prov_city', 'prov_state',
'prov_zip', 'referral_reg', 'total_discharges', 'mean_covered_charges',
'mean_total_payments', 'mean_medicare_payments')
head(hospital_charges)
hospital_charges$mean_covered_charges = as.numeric(gsub("\\$","",hospital_charges$mean_covered_charges))
hospital_charges$mean_total_payments = as.numeric(gsub("\\$","",hospital_charges$mean_total_payments))
hospital_charges$mean_medicare_payments = as.numeric(gsub("\\$","",hospital_charges$mean_medicare_payments))
head(hospital_charges)
set.seed(1)
hospital_charges <-bind_cols(hospital_charges[c(1,3,5,7,8,9,11,12)],missForest::prodNA(hospital_charges[c(-1,-3,-5,-7,-8,-9,-11,-12)],noNA=0.1))
hospital_charges
set.seed(101)
sample <- sample.int(n=nrow(hospital_charges), size=floor(.80*nrow(hospital_charges)), replace = F)
train <- hospital_charges[sample,]
test <- hospital_charges[-sample,]
train
test
names(hospital_charges) <- c('drg_def', 'prov_id', 'prov_name', 'prov_address', 'prov_city', 'prov_state',
'prov_zip', 'referral_reg', 'total_discharges', 'mean_covered_charges',
'mean_total_payments', 'mean_medicare_payments')
head(hospital_charges)
